
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{assignment\_1(NS)}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Mandatory Assignment 1}\label{mandatory-assignment-1}

This is the first of two mandatory assignments which must be completed
during the course. First some practical information:

\begin{itemize}
\tightlist
\item
  When is the assignment due?: \textbf{23:59, Sunday, August 19, 2018.}
\item
  How do you grade the assignment?: You will \textbf{peergrade} each
  other as primary grading.
\item
  Can i work with my group?: \textbf{yes}
\end{itemize}

The assigment consist of one to tree problems from each of the exercise
sets you have solved so far (excluding set 1 and set 9). We've tried to
select problems which are self contained, but it might be nessecary to
solve some of the previous exercises in each set to fully answer the
problems in this assignment.

\subsection{Problems from Exercise Set
2:}\label{problems-from-exercise-set-2}

\begin{quote}
\textbf{Ex. 2.2}: Make two lists. The first should be numbered. The
second should be unnumbered and contain at least one sublevel.
\end{quote}

    \begin{quote}
{[}Answer to Ex. 2.2 here{]} 1. Hello 2. There 3. Friend

\begin{itemize}
\tightlist
\item
  This
\item
  Is

  \begin{itemize}
  \tightlist
  \item
    A

    \begin{itemize}
    \tightlist
    \item
      List
    \end{itemize}
  \end{itemize}
\end{itemize}
\end{quote}

    \subsection{Problems from Exercise set
3:}\label{problems-from-exercise-set-3}

\begin{quote}
\textbf{Ex. 3.1.3:} Let
\texttt{l1\ =\ {[}\textquotesingle{}r\ \textquotesingle{},\ \textquotesingle{}Is\textquotesingle{},\ \textquotesingle{}\textgreater{}\textquotesingle{},\ \textquotesingle{}\ \textless{}\ \textquotesingle{},\ \textquotesingle{}g\ \textquotesingle{},\ \textquotesingle{}?\textquotesingle{}{]}}.
Create from \texttt{l1} the sentence "Is r \textgreater{} g?" using your
knowledge about string formatting. Make sure there is only one space in
between worlds.

\begin{quote}
\emph{Hint:} You should be able to combine the above informations to
solve this exercise.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 3.1.3 here]}
         \PY{n}{l1} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Is}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZgt{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ \PYZlt{} }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{g }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{?}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         \PY{c+c1}{\PYZsh{}\PYZdq{} \PYZdq{}.join([l1[1],l1[0],l1[2],l1[\PYZhy{}2]]) + l1[\PYZhy{}1]}
             \PY{c+c1}{\PYZsh{}Using the .join command would\PYZsq{}ve been neat,}
             \PY{c+c1}{\PYZsh{}but due to the random white spaces in the strings it won\PYZsq{}t work that simply.}
         \PY{n}{l1}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{l1}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{+} \PY{n}{l1}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]} \PY{o}{+}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{l1}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2}\PY{p}{]}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)} \PY{o}{+} \PY{n}{l1}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}31}]:} 'Is r > g?'
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 3.1.4}: Create an empty dictionary \texttt{words} using the
\texttt{dict()}function. Then add each of the words in
\texttt{{[}\textquotesingle{}animal\textquotesingle{},\ \textquotesingle{}coffee\textquotesingle{},\ \textquotesingle{}python\textquotesingle{},\ \textquotesingle{}unit\textquotesingle{},\ \textquotesingle{}knowledge\textquotesingle{},\ \textquotesingle{}tread\textquotesingle{},\ \textquotesingle{}arise\textquotesingle{}{]}}
as a key, with the value being a boolean indicator for whether the word
begins with a vowel. The results should look like
\texttt{\{\textquotesingle{}bacon\textquotesingle{}:\ False,\ \textquotesingle{}asynchronous\textquotesingle{}:\ True\ ...\}}

\begin{quote}
\emph{Hint:} You might want co first construct a function that asseses
whether a given word begins with a vowel or not.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 3.1.4 here]}
         \PY{n}{words} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{p}{)}
         \PY{n}{dict\PYZus{}list1} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{animal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{coffee}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{python}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{unit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{knowledge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tread}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{arise}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         \PY{n}{dict\PYZus{}list2} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{k}{for} \PY{n}{key} \PY{o+ow}{in} \PY{n}{dict\PYZus{}list1}\PY{p}{:} \PY{c+c1}{\PYZsh{}A function for identifying vowels and appending them is created}
             \PY{k}{if} \PY{n}{key}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o+ow}{in} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{aeiou}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{c+c1}{\PYZsh{}The first letter of each string in the list is checked }
                 \PY{n}{dict\PYZus{}list2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{k+kc}{True}\PY{p}{)} \PY{c+c1}{\PYZsh{}If the letter is a vowel, append a True to the list}
             \PY{k}{else}\PY{p}{:}
                 \PY{n}{dict\PYZus{}list2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{k+kc}{False}\PY{p}{)} \PY{c+c1}{\PYZsh{}If not, append a False to the list.}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{dict\PYZus{}list2}\PY{p}{)} \PY{c+c1}{\PYZsh{}the results of the looped are examined and it looks good!}
             \PY{c+c1}{\PYZsh{}dict\PYZus{}list2 = [True,False,False,True,False,False,True] \PYZsh{}This is how the list should be.}
         
         \PY{n}{dict\PYZus{}zip} \PY{o}{=}  \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{dict\PYZus{}list1}\PY{p}{,} \PY{n}{dict\PYZus{}list2}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}The two lists are zipped together.}
         \PY{n}{words}\PY{o}{.}\PY{n}{update}\PY{p}{(}\PY{n}{dict\PYZus{}zip}\PY{p}{)} \PY{c+c1}{\PYZsh{}And then added to the dictionary \PYZsq{}words\PYZsq{}}
         \PY{n}{words}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[True, False, False, True, False, False, True]

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}32}]:} \{'animal': True,
          'coffee': False,
          'python': False,
          'unit': True,
          'knowledge': False,
          'tread': False,
          'arise': True\}
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 3.3.2:} use the \texttt{requests} module (get it with
\texttt{pip\ install\ requests}) and \texttt{construct\_link()} to
request birth data from the "FOD" table. Get all available years
(variable "Tid"), but only female births (BARNKON=P) . Unpack the json
payload and store the result. Wrap the whole thing in a function which
takes an url as input and returns the corresponding output.

\begin{quote}
\emph{Hint:} The \texttt{requests.response} object has a
\texttt{.json()} method.
\end{quote}

\begin{quote}
\emph{Note:} you wrote \texttt{construct\_link()} in 3.3.1, if you
didn't heres the link you need to get:
\texttt{https://api.statbank.dk/v1/data/FOLK1A/JSONSTAT?lang=en\&Tid=*}
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 3.3.2 here]}
         \PY{k+kn}{import} \PY{n+nn}{requests}
         \PY{k+kn}{import} \PY{n+nn}{re}
         \PY{c+c1}{\PYZsh{}A function which retrieves a desired URL as json}
         \PY{k}{def} \PY{n+nf}{get\PYZus{}data}\PY{p}{(}\PY{n}{url}\PY{p}{)}\PY{p}{:}
             \PY{n}{data\PYZus{}json}\PY{o}{=}\PY{n}{requests}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{url}\PY{p}{)}\PY{o}{.}\PY{n}{json}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}Fetch the desired url as a json data. }
             \PY{k}{return} \PY{n}{data\PYZus{}json}
           
           
         \PY{n}{get\PYZus{}data}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://api.statbank.dk/v1/data/FOD/JSONSTAT?lang=en\PYZam{}Tid=*\PYZam{}BARNKON=P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
         
         \PY{c+c1}{\PYZsh{}a function which retrieves the data from a table\PYZhy{}input and the desired variabel\PYZhy{}specifications:}
         \PY{k}{def} \PY{n+nf}{get\PYZus{}data}\PY{p}{(}\PY{n}{table\PYZus{}id}\PY{p}{,}\PY{n}{variables}\PY{p}{)}\PY{p}{:}
             \PY{n}{base} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://api.statbank.dk/v1/data/}\PY{l+s+si}{\PYZob{}id\PYZcb{}}\PY{l+s+s1}{/JSONSTAT?lang=en}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{id} \PY{o}{=} \PY{n}{table\PYZus{}id}\PY{p}{)}
             
             \PY{k}{for} \PY{n}{var} \PY{o+ow}{in} \PY{n}{variables}\PY{p}{:}
                 \PY{n}{base} \PY{o}{+}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZam{}}\PY{l+s+si}{\PYZob{}v\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{v} \PY{o}{=} \PY{n}{var}\PY{p}{)} 
         
             \PY{n}{response}\PY{o}{=}\PY{n}{requests}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{base}\PY{p}{)}
             \PY{n}{data\PYZus{}json}\PY{o}{=}\PY{n}{response}\PY{o}{.}\PY{n}{json}\PY{p}{(}\PY{p}{)}
             \PY{k}{return} \PY{n}{data\PYZus{}json}
         
         \PY{c+c1}{\PYZsh{}TA\PYZhy{}DA!}
         \PY{n}{get\PYZus{}data}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FOD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Tid=*}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BARNKON=P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}33}]:} \{'dataset': \{'dimension': \{'BARNKON': \{'label': 'sex of child',
             'category': \{'index': \{'P': 0\}, 'label': \{'P': 'Girls'\}\}\},
            'ContentsCode': \{'label': 'Indhold',
             'category': \{'index': \{'FOD': 0\},
              'label': \{'FOD': 'Live births'\},
              'unit': \{'FOD': \{'base': 'number', 'decimals': 0\}\}\}\},
            'Tid': \{'label': 'time',
             'category': \{'index': \{'1973': 0,
               '1974': 1,
               '1975': 2,
               '1976': 3,
               '1977': 4,
               '1978': 5,
               '1979': 6,
               '1980': 7,
               '1981': 8,
               '1982': 9,
               '1983': 10,
               '1984': 11,
               '1985': 12,
               '1986': 13,
               '1987': 14,
               '1988': 15,
               '1989': 16,
               '1990': 17,
               '1991': 18,
               '1992': 19,
               '1993': 20,
               '1994': 21,
               '1995': 22,
               '1996': 23,
               '1997': 24,
               '1998': 25,
               '1999': 26,
               '2000': 27,
               '2001': 28,
               '2002': 29,
               '2003': 30,
               '2004': 31,
               '2005': 32,
               '2006': 33,
               '2007': 34,
               '2008': 35,
               '2009': 36,
               '2010': 37,
               '2011': 38,
               '2012': 39,
               '2013': 40,
               '2014': 41,
               '2015': 42,
               '2016': 43,
               '2017': 44\},
              'label': \{'1973': '1973',
               '1974': '1974',
               '1975': '1975',
               '1976': '1976',
               '1977': '1977',
               '1978': '1978',
               '1979': '1979',
               '1980': '1980',
               '1981': '1981',
               '1982': '1982',
               '1983': '1983',
               '1984': '1984',
               '1985': '1985',
               '1986': '1986',
               '1987': '1987',
               '1988': '1988',
               '1989': '1989',
               '1990': '1990',
               '1991': '1991',
               '1992': '1992',
               '1993': '1993',
               '1994': '1994',
               '1995': '1995',
               '1996': '1996',
               '1997': '1997',
               '1998': '1998',
               '1999': '1999',
               '2000': '2000',
               '2001': '2001',
               '2002': '2002',
               '2003': '2003',
               '2004': '2004',
               '2005': '2005',
               '2006': '2006',
               '2007': '2007',
               '2008': '2008',
               '2009': '2009',
               '2010': '2010',
               '2011': '2011',
               '2012': '2012',
               '2013': '2013',
               '2014': '2014',
               '2015': '2015',
               '2016': '2016',
               '2017': '2017'\}\}\},
            'id': ['BARNKON', 'ContentsCode', 'Tid'],
            'size': [1, 1, 45],
            'role': \{'metric': ['ContentsCode'], 'time': ['Tid']\}\},
           'label': 'Live births by sex of child, Indhold and time',
           'source': 'Statistics Denmark',
           'updated': '2018-02-21T07:00:00Z',
           'value': [34996,
            34771,
            35260,
            31533,
            30055,
            30161,
            28909,
            27941,
            25972,
            25595,
            24821,
            25228,
            26284,
            26878,
            27142,
            28520,
            29876,
            30813,
            31353,
            32914,
            32760,
            34027,
            33885,
            32819,
            32899,
            32116,
            32341,
            32652,
            31961,
            31109,
            31441,
            31539,
            31459,
            31580,
            31267,
            31507,
            30557,
            30946,
            28984,
            28131,
            27283,
            27616,
            28357,
            29833,
            29930]\}\}
\end{Verbatim}
            
    \subsection{Problems from exercise set
4}\label{problems-from-exercise-set-4}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
\end{Verbatim}


    \begin{quote}
\textbf{Ex. 4.1.1:} Use Pandas' CSV reader to fetch daily data weather
from 1864 for various stations - available
\href{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/by_year/}{here}.

\begin{quote}
\emph{Hint 1}: for compressed files you may need to specify the keyword
\texttt{compression}.
\end{quote}

\begin{quote}
\emph{Hint 2}: keyword \texttt{header} can be specified as the CSV has
no column names.
\end{quote}

\begin{quote}
\emph{Hint 3}: Specify the path, as the URL linking directly to the 1864
file.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 4.1.1 here]}
         \PY{n}{url} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/by\PYZus{}year/1864.csv.gz}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{sep}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{,}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{compression}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{gzip}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{usecols}\PY{o}{=}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{]} \PY{p}{)}
         \PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)} \PY{c+c1}{\PYZsh{}The first 5 observations are examined. Looks good!}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}35}]:}              0         1     2    3
         0  ITE00100550  18640101  TMAX   10
         1  ITE00100550  18640101  TMIN  -23
         2  ITE00100550  18640101  PRCP   25
         3  ASN00079028  18640101  PRCP    0
         4  USC00064757  18640101  PRCP  119
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 4.1.2:} Structure your weather DataFrame by using only the
relevant columns (station identifier, data, observation type,
observation value), rename them. Make sure observations are correctly
formated (how many decimals should we add? one?).

\begin{quote}
\emph{Hint:} rename can be done with \texttt{df.columns=COLS} where
\texttt{COLS} is a list of column names.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 4.1.2 here]}
         \PY{n}{COLS} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{station}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}type}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{df}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{n}{COLS}
         \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{/} \PY{l+m+mi}{10}
         \PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}36}]:}        station  datetime obs\_type  obs\_value
         0  ITE00100550  18640101     TMAX        1.0
         1  ITE00100550  18640101     TMIN       -2.3
         2  ITE00100550  18640101     PRCP        2.5
         3  ASN00079028  18640101     PRCP        0.0
         4  USC00064757  18640101     PRCP       11.9
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 4.1.3:} Select data for the station \texttt{ITE00100550} and
only observations for maximal temperature. Make a copy of the DataFrame.
Explain in a one or two sentences how copying works.

\begin{quote}
\emph{Hint 1}: the \texttt{\&} operator works elementwise on boolean
series (like \texttt{and} in core python).
\end{quote}

\begin{quote}
\emph{Hint 2}: copying of the dataframe is done with the \texttt{copy}
method for DataFrames.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 4.1.3 here]}
         \PY{n}{dfITE} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{station} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ITE00100550}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{obs\PYZus{}type} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TMAX}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{dfITE}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}To ensure the original DataFrame remains unchanged, we use copy.}
         \PY{c+c1}{\PYZsh{}Had we not copied the DataFrame, but simply created a new (i.e. without .copy()) }
         \PY{c+c1}{\PYZsh{}we would reference the new to the original (i.e. changes to the new would apply to the original as well).}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}37}]:}          station  datetime obs\_type  obs\_value
         0    ITE00100550  18640101     TMAX        1.0
         75   ITE00100550  18640102     TMAX        0.8
         152  ITE00100550  18640103     TMAX       -2.8
         227  ITE00100550  18640104     TMAX        0.0
         305  ITE00100550  18640105     TMAX       -1.9
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 4.1.4:} Make a new column called \texttt{TMAX\_F} where you
have converted the temperature variables to Fahrenheit.

\begin{quote}
\emph{Hint}: Conversion is \(F = 32 + 1.8*C\) where \(F\) is Fahrenheit
and \(C\) is Celsius.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 4.1.4 here]}
         \PY{n}{dfITE}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TMAX\PYZus{}F}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{32} \PY{o}{+} \PY{l+m+mf}{1.8} \PY{o}{*} \PY{n}{dfITE}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{dfITE}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}38}]:}          station  datetime obs\_type  obs\_value  TMAX\_F
         0    ITE00100550  18640101     TMAX        1.0   33.80
         75   ITE00100550  18640102     TMAX        0.8   33.44
         152  ITE00100550  18640103     TMAX       -2.8   26.96
         227  ITE00100550  18640104     TMAX        0.0   32.00
         305  ITE00100550  18640105     TMAX       -1.9   28.58
\end{Verbatim}
            
    \subsection{Problems from exercise set
5}\label{problems-from-exercise-set-5}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np} 
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
         \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns} 
         
         \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline 
         
         \PY{n}{iris} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{load\PYZus{}dataset}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{iris}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{titanic} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{load\PYZus{}dataset}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{titanic}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}For extra eye\PYZhy{}candy effect of our seaborn plots, we set the palette.}
         \PY{c+c1}{\PYZsh{}DISCLAIMER: If the color palette is too light for you screen to see the plots properly you have three options:}
             \PY{c+c1}{\PYZsh{} 1) Get a better screen.}
             \PY{c+c1}{\PYZsh{} 2) Get a better graphic card.}
             \PY{c+c1}{\PYZsh{} 3) Change the color palette (this is the boring soultion ;\PYZhy{})}
         \PY{n}{sns}\PY{o}{.}\PY{n}{set\PYZus{}palette}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pastel1\PYZus{}r}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{quote}
\textbf{Ex. 5.1.1:}: Show the first five rows of the titanic dataset.
What information is in the dataset? Use a barplot to show the
probability of survival for men and women within each passenger class.
Can you make a boxplot showing the same information (why/why not?).
\emph{Bonus:} show a boxplot for the fare-prices within each passenger
class.

Spend five minutes discussing what you can learn about the
survival-selection aboard titanic from the figure(s).

\begin{quote}
\emph{Hint:} https://seaborn.pydata.org/generated/seaborn.barplot.html,
specifically the \texttt{hue} option.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 5.1.1 here]}
         \PY{n}{titanic}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}Looks like being a female on 1. and 2. class had 90\PYZhy{}100 chance of surviving (on average)}
         \PY{c+c1}{\PYZsh{}Whereas females on 3. class have 50\PYZpc{} (on average) chance of surviving.}
         \PY{c+c1}{\PYZsh{}As for the males, their odds were far worse (As the saying goes: \PYZdq{}Save the women and children first.\PYZdq{})}
         \PY{n}{h} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{barplot}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{class}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{survived}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sex}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data} \PY{o}{=} \PY{n}{titanic}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Class}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Survival Probability}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{n}{h}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_21_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{class}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{survived}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sex}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{titanic}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}Using a boxplot for a categorical/discrete variables, such as survived (either survived or not), }
         \PY{c+c1}{\PYZsh{}will not be informatirve nor eye candy for anyone.}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}41}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0xd1450b8>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_22_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} BONUS \PYZsh{}\PYZsh{}}
         \PY{c+c1}{\PYZsh{}Oh boy there\PYZsq{}s a big difference between the prices of the classes and within first\PYZhy{}class prices.}
         \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pclass}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{fare}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sex}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data} \PY{o}{=} \PY{n}{titanic}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}42}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0xd640e80>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_23_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{quote}
\textbf{Ex. 5.1.2:} Using the iris flower dataset, draw a scatterplot of
sepal length and petal length. Include a second order polynomial fitted
to the data. Add a title to the plot and rename the axis labels.
\emph{Discuss:} Is this a meaningful way to display the data? What could
we do differently?

For a better understanding of the dataset this image might be useful:

\begin{quote}
\emph{Hint:} use the \texttt{.regplot} method from seaborn.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 5.1.2 here]}
         
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{iris}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
         \PY{n}{g} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{regplot}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sepal\PYZus{}length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{petal\PYZus{}length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{fit\PYZus{}reg}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{order}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{iris}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Sepal length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Petal length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Petal and Sepal length relation}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}       
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{n}{g}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}Generally, using a scatterplot for this kind of data is a meaningful way to display the data.}
         \PY{c+c1}{\PYZsh{}Yet, due to no flowers having having a petal length between 2\PYZhy{}3,}
         \PY{c+c1}{\PYZsh{}the second order polynomial might not be the best tool.}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
   sepal\_length  sepal\_width  petal\_length  petal\_width species
0           5.1          3.5           1.4          0.2  setosa
1           4.9          3.0           1.4          0.2  setosa
2           4.7          3.2           1.3          0.2  setosa
3           4.6          3.1           1.5          0.2  setosa
4           5.0          3.6           1.4          0.2  setosa

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_25_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{quote}
\textbf{Ex. 5.1.3:} Combine the two of the figures you created above
into a two-panel figure similar to the one shown here:

Save the figure as a png file on your computer. \textgreater{}
\emph{Hint:} See
\href{https://stackoverflow.com/questions/41384040/subplot-for-seaborn-boxplot}{this
question} on stackoverflow for inspiration.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}44}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 5.1.3 here]}
         \PY{n}{f}\PY{p}{,} \PY{n}{axes} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{16}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
         
         \PY{n}{sns}\PY{o}{.}\PY{n}{barplot}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{class}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{survived}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sex}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data} \PY{o}{=} \PY{n}{titanic}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{axes}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Class}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Survival Probability}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         
         \PY{n}{sns}\PY{o}{.}\PY{n}{regplot}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sepal\PYZus{}length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{petal\PYZus{}length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{fit\PYZus{}reg}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{order}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{iris}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{axes}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Sepal length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Petal length}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Exercise 5\PYZhy{}1\PYZhy{}3.png}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_27_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{quote}
\textbf{Ex. 5.1.4:} Use
\href{https://seaborn.pydata.org/generated/seaborn.pairplot.html}{pairplot
with hue} to create a figure that clearly shows how the different
species vary across measurements. Change the color palette and remove
the shading from the density plots. \emph{Bonus:} Try to explain how the
\texttt{diag\_kws} argument works (\emph{hint:}
\href{https://stackoverflow.com/questions/1769403/understanding-kwargs-in-python}{read
here})
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 5.1.4 here]}
         \PY{c+c1}{\PYZsh{}Coder\PYZsq{}s comment:}
         \PY{c+c1}{\PYZsh{}Despite the exercise explicity stating to remove the shading, we refuse to do so.}
         \PY{c+c1}{\PYZsh{}The density plots looks like deliciously\PYZhy{}looking eye\PYZhy{}candy *with* the shading}
         \PY{c+c1}{\PYZsh{}and as such, we refuse to remove the shading.}
         \PY{c+c1}{\PYZsh{}Now, one could probably argue, that we could change our colour palette to a more suiting palette that matches the lack of shading.}
         \PY{c+c1}{\PYZsh{}but that would be no fun (and look at that beautiful colour palette!)}
         \PY{n}{sns}\PY{o}{.}\PY{n}{pairplot}\PY{p}{(}\PY{n}{iris}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{species}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+m+mi}{3}\PY{p}{,} \PY{n}{kind}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{scatter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                      \PY{n}{plot\PYZus{}kws}\PY{o}{=}\PY{n+nb}{dict}\PY{p}{(}\PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{k}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{linewidth}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}\PY{p}{,}
                      \PY{n}{diag\PYZus{}kws}\PY{o}{=}\PY{n+nb}{dict}\PY{p}{(}\PY{n}{shade}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{,} \PY{c+c1}{\PYZsh{} \PYZdq{}diag\PYZdq{} adjusts/tunes the diagonal plots}
                      \PY{n}{diag\PYZus{}kind}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{kde}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}45}]:} <seaborn.axisgrid.PairGrid at 0xcc4edd8>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_29_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsection{Problems from exercise set
6}\label{problems-from-exercise-set-6}

\begin{quote}
\emph{Note:} A central part of these exercises and the ones from
exercise set 7 is downloading data from the NOAA servers. If you cannot
complete this part, you can download the data as csv files \textbf{from
\href{https://github.com/abjer/sds/tree/master/material/session_7}{github}}.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
         \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
\end{Verbatim}


    \begin{quote}
\textbf{Ex. 6.1.4:} Extract the country code from the station name into
a separate column.

\begin{quote}
\emph{Hint:} The station column contains a GHCND ID, given to each
weather station by NOAA. The format of these ID's is a 2-3 letter
country code, followed by a integer identifying the specific station. A
simple approach is to assume a fixed length of the country ID. A more
complex way would be to use the
\href{https://docs.python.org/2/library/re.html}{\texttt{re}} module.
\end{quote}
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}47}]:} \PY{c+c1}{\PYZsh{}Thanks to Kristian\PYZsq{}s beautiful code, we shall use this for transparency, instead of a locally stored .csv.}
         
         \PY{n}{url} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/by\PYZus{}year/1864.csv.gz}\PY{l+s+s1}{\PYZsq{}}
         
         \PY{n}{df\PYZus{}weather} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{url}\PY{p}{,}
                                  \PY{n}{compression}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gzip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                  \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{]}
         
         \PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{station}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{/} \PY{l+m+mi}{10}
         \PY{n}{df\PYZus{}select} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{p}{(}\PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{station} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ITE00100550}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{obs\PYZus{}type} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX\PYZus{}F}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{32} \PY{o}{+} \PY{l+m+mf}{1.8} \PY{o}{*} \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         \PY{n}{df\PYZus{}sorted} \PY{o}{=} \PY{n}{df\PYZus{}select}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{wdf} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{df\PYZus{}sorted}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} [Answer to Ex. 6.1.4]}
         
         \PY{k+kn}{import} \PY{n+nn}{re}
         
         \PY{c+c1}{\PYZsh{}Using the re module, we identify all the letters (lower and upper) for each string in the station column}
         \PY{c+c1}{\PYZsh{}and add them as a seperate string in a seperate column.}
         \PY{n}{wdf}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{re}\PY{o}{.}\PY{n}{findall}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[a\PYZhy{}zA\PYZhy{}Z]+}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{item}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{wdf}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{station}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{wdf}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}47}]:}         station  datetime obs\_type  obs\_value  TMAX\_F country
         16  ITE00100550  18640117     TMAX       -6.3   20.66     ITE
         17  ITE00100550  18640118     TMAX       -5.0   23.00     ITE
         13  ITE00100550  18640114     TMAX       -5.0   23.00     ITE
         12  ITE00100550  18640113     TMAX       -4.3   24.26     ITE
         14  ITE00100550  18640115     TMAX       -3.1   26.42     ITE
         2   ITE00100550  18640103     TMAX       -2.8   26.96     ITE
         15  ITE00100550  18640116     TMAX       -2.5   27.50     ITE
         11  ITE00100550  18640112     TMAX       -2.5   27.50     ITE
         4   ITE00100550  18640105     TMAX       -1.9   28.58     ITE
         41  ITE00100550  18640211     TMAX       -1.8   28.76     ITE
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 6.1.5:} Make a function that downloads and formats the
weather data according to previous exercises in Exercise Section 4.1,
6.1. You should use data for ALL stations but still only select maximal
temperature. \emph{Bonus:} To validate that your function works plot the
temperature curve for each country in the same window. Use
\texttt{plt.legend()} to add a legend.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}77}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 6.1.5]}
         \PY{k+kn}{import} \PY{n+nn}{re}
         \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
         \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
         \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
         
         \PY{k}{def} \PY{n+nf}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{n}{year\PYZus{}id}\PY{p}{)}\PY{p}{:}
             \PY{n}{url} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/by\PYZus{}year/}\PY{l+s+si}{\PYZob{}id\PYZcb{}}\PY{l+s+s1}{.csv.gz}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{id} \PY{o}{=} \PY{n}{year\PYZus{}id}\PY{p}{)}
             
             \PY{n}{df\PYZus{}weather} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{url}\PY{p}{,}
                                  \PY{n}{compression}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gzip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                  \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{]}
             
             \PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{station}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{/} \PY{l+m+mi}{10}
             \PY{n}{df\PYZus{}select} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{obs\PYZus{}type} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
             \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX\PYZus{}F}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{32} \PY{o}{+} \PY{l+m+mf}{1.8} \PY{o}{*} \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{df\PYZus{}sorted} \PY{o}{=} \PY{n}{df\PYZus{}select}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
             \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{df\PYZus{}sorted}\PY{p}{)}
             \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n+nb}{format}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
             \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DatetimeIndex}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{month}
             \PY{c+c1}{\PYZsh{}df[\PYZsq{}Country\PYZus{}code\PYZsq{}]=df[\PYZsq{}station\PYZsq{}].str[:3] \PYZsh{}The static way of getting the country code (i.e. first 3 letters)}
             \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{re}\PY{o}{.}\PY{n}{findall}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[a\PYZhy{}zA\PYZhy{}Z]+}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{item}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{station}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]} \PY{c+c1}{\PYZsh{}The dynamic way.}
             \PY{k}{return} \PY{n}{df}
         \PY{c+c1}{\PYZsh{}The plotting is currently part of the entire function.}
         \PY{c+c1}{\PYZsh{}Yet, the function could easily be two seperate functions, }
         \PY{c+c1}{\PYZsh{}such that a function for fetching the data and a function for plotting exist.}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}78}]:} \PY{c+c1}{\PYZsh{}The results of the magnificent function  \PYZhy{} in all its glory \PYZhy{} can be witnessed below:}
         \PY{n}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{l+m+mi}{1864}\PY{p}{)}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}78}]:}          station  datetime obs\_type  obs\_value  TMAX\_F       Date  Month  \textbackslash{}
         845  SZ000006717  18640226     TMAX      -34.0  -29.20 1864-02-26      2   
         577  SZ000006717  18640208     TMAX      -17.4    0.68 1864-02-08      2   
         699  CA006158350  18640217     TMAX      -16.7    1.94 1864-02-17      2   
         42   SZ000006717  18640103     TMAX      -16.5    2.30 1864-01-03      1   
         16   CA006158350  18640102     TMAX      -16.1    3.02 1864-01-02      1   
         607  SZ000006717  18640210     TMAX      -15.9    3.38 1864-02-10      2   
         199  EZE00100082  18640114     TMAX      -15.1    4.82 1864-01-14      1   
         592  SZ000006717  18640209     TMAX      -15.0    5.00 1864-02-09      2   
         741  SZ000006717  18640219     TMAX      -14.7    5.54 1864-02-19      2   
         533  SZ000006717  18640205     TMAX      -14.4    6.08 1864-02-05      2   
         
             country  
         845      SZ  
         577      SZ  
         699      CA  
         42       SZ  
         16       CA  
         607      SZ  
         199     EZE  
         592      SZ  
         741      SZ  
         533      SZ  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}79}]:} \PY{c+c1}{\PYZsh{}BONUS: A FUNCTION FOR THE BEAUTIFUL PLOTS!}
         \PY{k}{def} \PY{n+nf}{plot\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{n}{year\PYZus{}id}\PY{p}{)}\PY{p}{:}
             \PY{k}{for} \PY{n}{title}\PY{p}{,} \PY{n}{group} \PY{o+ow}{in} \PY{n}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{n}{year\PYZus{}id}\PY{p}{)}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{:}
                 \PY{n}{group}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{n}{title}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Maximum temperature (C) in }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{year\PYZus{}id}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}80}]:} \PY{n}{plot\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{l+m+mi}{1864}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_5.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_7.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_9.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_11.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsection{Problems from exercise set
7}\label{problems-from-exercise-set-7}

\begin{quote}
\emph{Note:} Once again if you haven't managed to download the data from
NOAA, you can refer to the github repo to get csv-files containing the
required data.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}81}]:} \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline 
         
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd} 
         \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
         \PY{k+kn}{import} \PY{n+nn}{matplotlib} \PY{k}{as} \PY{n+nn}{mpl}
         
         \PY{c+c1}{\PYZsh{} Increases the plot size a little}
         \PY{n}{mpl}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{figure.figsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{22}\PY{p}{,} \PY{l+m+mi}{12}
\end{Verbatim}


    \begin{quote}
\textbf{Ex. 7.1.1:} Plot the monthly max,min, mean, first and third
quartiles for maximum temperature for our station with the ID
\emph{'ITE00100550'} in 1864.
\end{quote}

\begin{quote}
\emph{Hint}: the method \texttt{describe} computes all these measures.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 7.1.1]}
         \PY{n}{df1} \PY{o}{=} \PY{n}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{l+m+mi}{1864}\PY{p}{)} \PY{c+c1}{\PYZsh{}Data is retreived based on our previous function.}
         \PY{n}{df\PYZus{}ITE} \PY{o}{=}  \PY{n}{df1}\PY{p}{[}\PY{p}{(}\PY{n}{df1}\PY{o}{.}\PY{n}{station} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ITE00100550}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}A sub\PYZhy{}sample for the desired station is created.}
         \PY{n}{df2} \PY{o}{=} \PY{n}{df\PYZus{}ITE}\PY{p}{[}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TMAX\PYZus{}F}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Month}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}A sub\PYZhy{}sample is created for easier use}
         \PY{n}{df2}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}No need to look at summary statistics for datetime :)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}93}]:}         obs\_value      TMAX\_F       Month
         count  366.000000  366.000000  366.000000
         mean    16.249727   61.249508    6.513661
         std     10.158772   18.285789    3.455958
         min     -6.300000   20.660000    1.000000
         25\%      7.600000   45.680000    4.000000
         50\%     16.150000   61.070000    7.000000
         75\%     25.325000   77.585000    9.750000
         max     34.800000   94.640000   12.000000
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}95}]:} \PY{c+c1}{\PYZsh{}In Celsius:}
         \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{y} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{obs\PYZus{}value}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{x}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Month}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{df2}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pastel1\PYZus{}r}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}95}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0xd351908>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_43_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}96}]:} \PY{c+c1}{\PYZsh{}In Fahrenheir:}
         \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{y} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TMAX\PYZus{}F}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{x}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Month}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{df2}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pastel1\PYZus{}r}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}96}]:} <matplotlib.axes.\_subplots.AxesSubplot at 0xd0cd208>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_44_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{quote}
\textbf{Ex. 7.1.2:} Get the processed data from years 1864-1867 as a
list of DataFrames. Convert the list into a single DataFrame by
concatenating vertically.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}97}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 7.1.2]}
         \PY{c+c1}{\PYZsh{}The same function as made in exercise 6 is used:}
         \PY{c+c1}{\PYZsh{}A function, based on the original code for fetching the data, where a year\PYZus{}id is specified.}
         \PY{c+c1}{\PYZsh{}As such, the processed data from whichever desire year can be retrieved by specifying year\PYZus{}id in the function.}
         \PY{k}{def} \PY{n+nf}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{n}{year\PYZus{}id}\PY{p}{)}\PY{p}{:}
             \PY{n}{url} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/by\PYZus{}year/}\PY{l+s+si}{\PYZob{}id\PYZcb{}}\PY{l+s+s1}{.csv.gz}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{id} \PY{o}{=} \PY{n}{year\PYZus{}id}\PY{p}{)}
             
             \PY{n}{df\PYZus{}weather} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{url}\PY{p}{,}
                                  \PY{n}{compression}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gzip}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                  \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{]}
             
             \PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{station}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{/} \PY{l+m+mi}{10}
             \PY{n}{df\PYZus{}select} \PY{o}{=} \PY{n}{df\PYZus{}weather}\PY{p}{[}\PY{n}{df\PYZus{}weather}\PY{o}{.}\PY{n}{obs\PYZus{}type} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
             \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TMAX\PYZus{}F}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{32} \PY{o}{+} \PY{l+m+mf}{1.8} \PY{o}{*} \PY{n}{df\PYZus{}select}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{df\PYZus{}sorted} \PY{o}{=} \PY{n}{df\PYZus{}select}\PY{o}{.}\PY{n}{reset\PYZus{}index}\PY{p}{(}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{n}{by}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obs\PYZus{}value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
             \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{df\PYZus{}sorted}\PY{p}{)}
             \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n+nb}{format}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{m}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
             \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DatetimeIndex}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{month}
             \PY{c+c1}{\PYZsh{}df[\PYZsq{}Country\PYZus{}code\PYZsq{}]=df[\PYZsq{}station\PYZsq{}].str[:3] \PYZsh{}The static way of getting the country code (i.e. first 3 letters)}
             \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{country}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{re}\PY{o}{.}\PY{n}{findall}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[a\PYZhy{}zA\PYZhy{}Z]+}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{item}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{df}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{station}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]} \PY{c+c1}{\PYZsh{}The dynamic way.}
             \PY{k}{return} \PY{n}{df}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}101}]:} \PY{n}{yearlist} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1864}\PY{p}{,}\PY{l+m+mi}{1868}\PY{p}{)}\PY{p}{:}
              \PY{n}{yearlist}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{get\PYZus{}weather\PYZus{}data}\PY{p}{(}\PY{n}{i}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{df4} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{n}{yearlist}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{}A more manual way can be seen below, yet looping is a lot simpler and smarter for larger ranges.}
              \PY{c+c1}{\PYZsh{} wdf4 = pd.concat([get\PYZus{}weather\PYZus{}data(1864), get\PYZus{}weather\PYZus{}data(1865), get\PYZus{}weather\PYZus{}data(1866), get\PYZus{}weather\PYZus{}data(1867)])}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}123}]:} \PY{n}{df4}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}123}]:}          station  datetime obs\_type  obs\_value  TMAX\_F       Date  Month  \textbackslash{}
          845  SZ000006717  18640226     TMAX      -34.0  -29.20 1864-02-26      2   
          577  SZ000006717  18640208     TMAX      -17.4    0.68 1864-02-08      2   
          699  CA006158350  18640217     TMAX      -16.7    1.94 1864-02-17      2   
          42   SZ000006717  18640103     TMAX      -16.5    2.30 1864-01-03      1   
          16   CA006158350  18640102     TMAX      -16.1    3.02 1864-01-02      1   
          607  SZ000006717  18640210     TMAX      -15.9    3.38 1864-02-10      2   
          199  EZE00100082  18640114     TMAX      -15.1    4.82 1864-01-14      1   
          592  SZ000006717  18640209     TMAX      -15.0    5.00 1864-02-09      2   
          741  SZ000006717  18640219     TMAX      -14.7    5.54 1864-02-19      2   
          533  SZ000006717  18640205     TMAX      -14.4    6.08 1864-02-05      2   
          
              country  
          845      SZ  
          577      SZ  
          699      CA  
          42       SZ  
          16       CA  
          607      SZ  
          199     EZE  
          592      SZ  
          741      SZ  
          533      SZ  
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 7.1.3:} Parse the station location data which you can find
at https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/ghcnd-stations.txt.
Merge station locations onto the weather data spanning 1864-1867.
\end{quote}

\begin{quote}
\emph{Hint:} The location data have the folllowing format,
\end{quote}

\begin{verbatim}
------------------------------
Variable   Columns   Type
------------------------------
ID            1-11   Character
LATITUDE     13-20   Real
LONGITUDE    22-30   Real
ELEVATION    32-37   Real
STATE        39-40   Character
NAME         42-71   Character
GSN FLAG     73-75   Character
HCN/CRN FLAG 77-79   Character
WMO ID       81-85   Character
------------------------------
\end{verbatim}

\begin{quote}
\emph{Hint}: The station information has fixed width format - does there
exist a pandas reader for that?
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}120}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 7.1.3]}
          \PY{c+c1}{\PYZsh{}Location data is fetched and cleaned based on the its fixed width format:}
          \PY{n}{url\PYZus{}loc} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{https://www1.ncdc.noaa.gov/pub/data/ghcn/daily/ghcnd\PYZhy{}stations.txt}\PY{l+s+s2}{\PYZdq{}}
          \PY{n}{colspecs} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{11}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{12}\PY{p}{,} \PY{l+m+mi}{21}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{21}\PY{p}{,} \PY{l+m+mi}{31}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{31}\PY{p}{,} \PY{l+m+mi}{38}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{38}\PY{p}{,} \PY{l+m+mi}{41}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{41}\PY{p}{,} \PY{l+m+mi}{72}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{72}\PY{p}{,} \PY{l+m+mi}{76}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{76}\PY{p}{,} \PY{l+m+mi}{80}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+m+mi}{80}\PY{p}{,} \PY{l+m+mi}{86}\PY{p}{)}\PY{p}{]}
          \PY{n}{df\PYZus{}loc} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}fwf}\PY{p}{(}\PY{n}{url\PYZus{}loc}\PY{p}{,} \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{colspecs} \PY{o}{=} \PY{n}{colspecs}\PY{p}{)}
          \PY{n}{df\PYZus{}loc}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{station}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{elevation}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{state}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{name}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{gsn}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{hcn}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{wmo}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
          \PY{n}{df\PYZus{}loc}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}Having a look is always nice (especially when your code works)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}120}]:}        station  latitude  longitude  elevation state                   name  \textbackslash{}
          0  ACW00011604   17.1167   -61.7833       10.1   NaN  ST JOHNS COOLIDGE FLD   
          1  ACW00011647   17.1333   -61.7833       19.2   NaN               ST JOHNS   
          2  AE000041196   25.3330    55.5170       34.0   NaN    SHARJAH INTER. AIRP   
          3  AEM00041194   25.2550    55.3640       10.4   NaN             DUBAI INTL   
          4  AEM00041217   24.4330    54.6510       26.8   NaN         ABU DHABI INTL   
          
             gsn  hcn      wmo  
          0  NaN  NaN      NaN  
          1  NaN  NaN      NaN  
          2  GSN  NaN  41196.0  
          3  NaN  NaN  41194.0  
          4  NaN  NaN  41217.0  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}122}]:} \PY{n}{wdf\PYZus{}merged} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{wdf4}\PY{p}{,} \PY{n}{df\PYZus{}loc}\PY{p}{,} \PY{n}{how}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{c+c1}{\PYZsh{}the two DataFrames are merged}
          \PY{n}{wdf\PYZus{}merged}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{}Wow such beauty, many data, very neat.}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}122}]:}        station  datetime obs\_type  obs\_value  TMAX\_F       Date  Month  \textbackslash{}
          0  SZ000006717  18640226     TMAX      -34.0  -29.20 1864-02-26      2   
          1  SZ000006717  18640208     TMAX      -17.4    0.68 1864-02-08      2   
          2  CA006158350  18640217     TMAX      -16.7    1.94 1864-02-17      2   
          3  SZ000006717  18640103     TMAX      -16.5    2.30 1864-01-03      1   
          4  CA006158350  18640102     TMAX      -16.1    3.02 1864-01-02      1   
          
            country  latitude  longitude  elevation state                     name  gsn  \textbackslash{}
          0      SZ   45.8667     7.1667     2472.0   NaN  COL DU GRAND ST-BERNARD  GSN   
          1      SZ   45.8667     7.1667     2472.0   NaN  COL DU GRAND ST-BERNARD  GSN   
          2      CA   43.6667   -79.4000      113.0    ON                  TORONTO  NaN   
          3      SZ   45.8667     7.1667     2472.0   NaN  COL DU GRAND ST-BERNARD  GSN   
          4      CA   43.6667   -79.4000      113.0    ON                  TORONTO  NaN   
          
             hcn      wmo  
          0  NaN   6717.0  
          1  NaN   6717.0  
          2  NaN  71266.0  
          3  NaN   6717.0  
          4  NaN  71266.0  
\end{Verbatim}
            
    \subsection{Problems from exercise set
8}\label{problems-from-exercise-set-8}

\begin{quote}
\textbf{Ex. 8.1.2.:} Use the \texttt{request} module to collect the
first page of job postings and unpack the relevant \texttt{json} data
into a \texttt{pandas} DataFrame.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}125}]:} \PY{k+kn}{import} \PY{n+nn}{requests}
          \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
          \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt} 
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}127}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 8.1.2 here]}
          \PY{n}{url} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{https://job.jobnet.dk/CV/FindWork/Search}\PY{l+s+s2}{\PYZdq{}}
          \PY{n}{jobdata}  \PY{o}{=} \PY{n}{requests}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{url}\PY{p}{)}\PY{o}{.}\PY{n}{json}\PY{p}{(}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} response.ok}
          \PY{n}{jobdata}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}
              \PY{c+c1}{\PYZsh{}The data consists of 4 dictionairies: }
                  \PY{c+c1}{\PYZsh{}Expression}
                  \PY{c+c1}{\PYZsh{}Facets}
                  \PY{c+c1}{\PYZsh{}JobPositionPostings}
                  \PY{c+c1}{\PYZsh{}TotalResultCount}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}127}]:} dict\_keys(['Expression', 'Facets', 'JobPositionPostings', 'TotalResultCount'])
\end{Verbatim}
            
    \begin{quote}
\textbf{Ex. 8.1.3.:} Store and print the 'TotalResultCount' value for
later use. Also create a dataframe from the 'JobPositionPostings' field
in the json.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}128}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 8.1.3 here]}
          \PY{n}{TRC} \PY{o}{=} \PY{n}{jobdata}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TotalResultCount}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{TRC}\PY{p}{)}
          
          \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{jobdata}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{JobPositionPostings}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
          \PY{n}{df} \PY{c+c1}{\PYZsh{}We see the first page of the job postings. Notice the weird formated AssignmentStartDate...}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
15684

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}128}]:}     AnonymousEmployer  AssignmentStartDate  AutomatchType  Country  \textbackslash{}
          0               False  0001-01-01T00:00:00              0  Danmark   
          1               False  0001-01-01T00:00:00              0  Danmark   
          2               False  0001-01-01T00:00:00              0  Danmark   
          3               False  0001-01-01T00:00:00              0  Danmark   
          4               False  0001-01-01T00:00:00              0  Danmark   
          5               False  0001-01-01T00:00:00              0  Danmark   
          6               False  0001-01-01T00:00:00              0  Danmark   
          7               False  0001-01-01T00:00:00              0  Danmark   
          8               False  0001-01-01T00:00:00              0  Danmark   
          9               False  0001-01-01T00:00:00              0  Danmark   
          10              False  0001-01-01T00:00:00              0  Danmark   
          11              False  0001-01-01T00:00:00              0  Danmark   
          12              False  0001-01-01T00:00:00              0  Danmark   
          13              False  0001-01-01T00:00:00              0  Danmark   
          14              False  0001-01-01T00:00:00              0  Danmark   
          15              False  0001-01-01T00:00:00              0  Danmark   
          16              False  0001-01-01T00:00:00              0  Danmark   
          17              False  0001-01-01T00:00:00              0  Danmark   
          18              False  0001-01-01T00:00:00              0  Danmark   
          19              False  0001-01-01T00:00:00              0  Danmark   
          
             EmploymentType  HasLocationValues  HiringOrgCVR  \textbackslash{}
          0                               True      35395806   
          1                               True      35087273   
          2                               True      10354331   
          3                               True      29201625   
          4                               True      29189420   
          5                               True      38380303   
          6                               True      37965766   
          7                               True      37965766   
          8                               True      37965766   
          9                               True      37965766   
          10                              True      25483863   
          11                              True      60729018   
          12                              True      29189595   
          13                              True      29188947   
          14                              True      29188947   
          15                              True      65307316   
          16                              True      19687236   
          17                              True      26059763   
          18                              True      65307316   
          19                              True      65307316   
          
                                  HiringOrgName       ID  IsExternal     {\ldots}      \textbackslash{}
          0            BRUNO A SRENSEN BYG A/S  4825162       False     {\ldots}       
          1                    Frken Morgenhr  4866223       False     {\ldots}       
          2            FIRST HOTEL ATLANTIC A/S  4866222       False     {\ldots}       
          3                         FLORAS CAFE  4866221       False     {\ldots}       
          4                       Hjvangskolen  4866220       False     {\ldots}       
          5                    danbolig Allerd  4866219       False     {\ldots}       
          6   Trin for Trin Service Erhverv ApS  4866215       False     {\ldots}       
          7   Trin for Trin Service Erhverv ApS  4866214       False     {\ldots}       
          8   Trin for Trin Service Erhverv ApS  4866213       False     {\ldots}       
          9   Trin for Trin Service Erhverv ApS  4866212       False     {\ldots}       
          10            Ole Larsen Transport AS  4866208       False     {\ldots}       
          11        Vejdirektoratet - Kbenhavn  4866207       False     {\ldots}       
          12  Dagplejen Brnehusene ved Fjorden  4866206       False     {\ldots}       
          13                   Rdhuset Otterup  4866205       False     {\ldots}       
          14                   Rdhuset Otterup  4866204       False     {\ldots}       
          15                  Rdovre Jobcenter  4866202       False     {\ldots}       
          16                   JKS a/s, Nstved  4866201       False     {\ldots}       
          17                            Naviair  4866200       False     {\ldots}       
          18                        Islev Skole  4866198       False     {\ldots}       
          19            Den Kommunale Tandpleje  4866197       False     {\ldots}       
          
              UseWorkPlaceAddressForJoblog Weight WorkHours WorkPlaceAbroad  \textbackslash{}
          0                           True    1.0   Fuldtid           False   
          1                           True    1.0   Fuldtid           False   
          2                           True    1.0   Fuldtid           False   
          3                           True    1.0    Deltid           False   
          4                           True    1.0    Deltid           False   
          5                           True    1.0   Fuldtid           False   
          6                          False    1.0    Deltid           False   
          7                           True    1.0    Deltid           False   
          8                          False    1.0    Deltid           False   
          9                          False    1.0    Deltid           False   
          10                          True    1.0   Fuldtid           False   
          11                          True    1.0   Fuldtid           False   
          12                          True    1.0   Fuldtid           False   
          13                          True    1.0    Deltid           False   
          14                          True    1.0   Fuldtid           False   
          15                          True    1.0   Fuldtid           False   
          16                          True    1.0   Fuldtid           False   
          17                          True    1.0   Fuldtid           False   
          18                          True    1.0   Fuldtid           False   
          19                          True    1.0    Deltid           False   
          
                    WorkPlaceAddress WorkPlaceCity  WorkPlaceNotStatic  \textbackslash{}
          0         Snderbrogade 61       Trring               False   
          1         Stationstorvet 4      lstykke               False   
          2           Europaplads 10      Aarhus C               False   
          3         Vesterbrogade 16   Kbenhavn V               False   
          4            Tingstedet 20   Svenstrup J               False   
          5   Allerd Stationsvej 2E       Allerd               False   
          6                                                      False   
          7             Savvrket 32          Gram               False   
          8                                                      False   
          9                                                      False   
          10          Dalgrdsvej 7       Brabrand               False   
          11    Niels Juels Gade 13    Kbenhavn K               False   
          12             Nyrupvej 78    Kalundborg               False   
          13         Rdhuspladsen 2       Otterup               False   
          14         Rdhuspladsen 2       Otterup               False   
          15          Egegrdsvej 66       Rdovre               False   
          16        Transportbuen 5        Nstved               False   
          17         Naviair Alle 1        Kastrup               False   
          18          Islevbrovej 44       Rdovre               False   
          19          Rdovrevej 125       Rdovre               False   
          
             WorkPlaceOtherAddress  WorkPlacePostalCode WorkplaceID  
          0                  False                 7160      121826  
          1                  False                 3650      108053  
          2                  False                 8000       14299  
          3                  False                 1620       55088  
          4                  False                 9230       95648  
          5                  False                 3450           0  
          6                   True                           119608  
          7                  False                 6510      119608  
          8                   True                           119608  
          9                   True                           119608  
          10                 False                 8220       78547  
          11                 False                 1059       28563  
          12                 False                 4400      128235  
          13                 False                 5450        1311  
          14                 False                 5450        1311  
          15                 False                 2610       86389  
          16                 False                 4700       94997  
          17                 False                 2770       23421  
          18                 False                 2610      111261  
          19                 False                 2610      126655  
          
          [20 rows x 42 columns]
\end{Verbatim}
            
    \subsection{Problems from exercise set
9}\label{problems-from-exercise-set-9}

\begin{quote}
\textbf{Ex. 9.2.1:} Load the data used in the exercise using the
\texttt{pd.read\_csv} function. (Hint: path to file can be both a url or
systempath).
\end{quote}

\begin{quote}
Define a variable
\texttt{sample\_string\ =\ \textquotesingle{}\textbackslash{}n\textquotesingle{}.join(df.sample(2000).reviewBody)}
as sample of all the reviews that you will practice on. (Run it once in
a while to get a new sample for potential differences). Imagine we were
a company wanting to find the reviews where customers are concerned with
the price of a service. They decide to write a regular expression to
match all reviews where a currencies and an amount is mentioned.
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}129}]:} \PY{c+c1}{\PYZsh{}Setting up:}
          \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
          \PY{k+kn}{import} \PY{n+nn}{requests}
          \PY{k+kn}{import} \PY{n+nn}{re}
          \PY{n}{url} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://raw.githubusercontent.com/snorreralund/explore\PYZus{}regex/master/explore\PYZus{}regex.py}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{response} \PY{o}{=} \PY{n}{requests}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{url}\PY{p}{)}
          \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{explore\PYZus{}regex.py}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{f}\PY{p}{:}
              \PY{n}{f}\PY{o}{.}\PY{n}{write}\PY{p}{(}\PY{n}{response}\PY{o}{.}\PY{n}{text}\PY{p}{)}
          \PY{k+kn}{import} \PY{n+nn}{explore\PYZus{}regex} \PY{k}{as} \PY{n+nn}{e\PYZus{}re}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}130}]:} \PY{k}{def} \PY{n+nf}{explore\PYZus{}regex}\PY{p}{(}\PY{n}{pattern}\PY{p}{,}\PY{n}{string\PYZus{}sample}\PY{p}{,}\PY{n}{n\PYZus{}output}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{before}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,}\PY{n}{after}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,}\PY{n}{shuffle}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
              \PY{n}{count} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{k+kn}{import} \PY{n+nn}{random}
              \PY{n}{length} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{string\PYZus{}sample}\PY{p}{)}
              
              \PY{n}{results} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{re}\PY{o}{.}\PY{n}{finditer}\PY{p}{(}\PY{n}{pattern}\PY{p}{,}\PY{n}{string\PYZus{}sample}\PY{p}{)}\PY{p}{)}\PY{p}{)}
              \PY{n}{re}
              \PY{k}{if} \PY{n}{shuffle}\PY{p}{:}
                  \PY{n}{random}\PY{o}{.}\PY{n}{shuffle}\PY{p}{(}\PY{n}{results}\PY{p}{)}
              \PY{n}{indices}\PY{p}{,}\PY{n}{results} \PY{o}{=} \PY{n+nb}{zip}\PY{p}{(}\PY{o}{*}\PY{n}{results}\PY{p}{)}
              \PY{k}{for} \PY{n}{result} \PY{o+ow}{in} \PY{n}{results}\PY{p}{:}
                  \PY{n}{start}\PY{p}{,}\PY{n}{stop} \PY{o}{=} \PY{n}{result}\PY{o}{.}\PY{n}{span}\PY{p}{(}\PY{p}{)}
                  \PY{n}{temp\PYZus{}after} \PY{o}{=} \PY{n+nb}{min}\PY{p}{(}\PY{p}{[}\PY{n}{length}\PY{o}{\PYZhy{}}\PY{n}{stop}\PY{p}{,}\PY{n}{after}\PY{p}{]}\PY{p}{)}
                  \PY{n}{temp\PYZus{}before} \PY{o}{=} \PY{n+nb}{min}\PY{p}{(}\PY{p}{[}\PY{n}{start}\PY{p}{,}\PY{n}{before}\PY{p}{]}\PY{p}{)}
                  \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Matched: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+se}{\PYZbs{}t}\PY{l+s+s1}{Context:}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}}\PY{o}{\PYZpc{}}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{group}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{string\PYZus{}sample}\PY{p}{[}\PY{n}{start}\PY{o}{\PYZhy{}}\PY{n}{temp\PYZus{}before}\PY{p}{:}\PY{n}{stop}\PY{o}{+}\PY{n}{temp\PYZus{}after}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                  \PY{n}{count}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
                  \PY{k}{if} \PY{n}{count}\PY{o}{\PYZgt{}}\PY{n}{n\PYZus{}output}\PY{p}{:}
                      \PY{k}{break}
              \PY{k}{return} \PY{p}{[}\PY{n}{result}\PY{o}{.}\PY{n}{group}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{result} \PY{o+ow}{in} \PY{n}{results}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}131}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 9.2.1]}
          \PY{n}{url} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://raw.githubusercontent.com/snorreralund/scraping\PYZus{}seminar/master/english\PYZus{}review\PYZus{}sample.csv}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{data} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{url}\PY{p}{)}
          \PY{n}{sample\PYZus{}string} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{data}\PY{o}{.}\PY{n}{sample}\PY{p}{(}\PY{l+m+mi}{2000}\PY{p}{)}\PY{o}{.}\PY{n}{reviewBody}\PY{p}{)}
          
          
          \PY{n}{any\PYZus{}amount} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{(}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d+(?:}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{.}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d}\PY{l+s+si}{\PYZob{}2\PYZcb{}}\PY{l+s+s1}{)?(?:}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d}\PY{l+s+si}{\PYZob{}3\PYZcb{}}\PY{l+s+s1}{)?)}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{explore\PYZus{}regex}\PY{p}{(}\PY{n}{any\PYZus{}amount}\PY{p}{,} \PY{n}{sample\PYZus{}string}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Matched: 400.00	Context:efund the 400.00 we are ou
Matched: 400.00	Context:told that 400.00 isn't a l
Matched: 8	Context:ipped and 8-10 days l
Matched: 10	Context:ped and 8-10 days late
Matched: 8	Context:ould take 8 working d
Matched: 10	Context:o arrive. 10 working d
Matched: 2	Context:h.  Round 2 blew us a
Matched: 5	Context:ednesday, 5 days befo
Matched: 10	Context:y. That's 10 days???  
Matched: 3	Context:arted out 3 hrs away 
Matched: 6	Context:ys it was 6 hrs away.
Matched: 4	Context:der four (4) boxes? o
Matched: 2	Context:rder two (2) or more 
Matched: 4	Context:ing four (4) boxes? o
Matched: 2	Context:ar as I'm 2 boxes int
Matched: 7100	Context:
Carried d7100 and 24-70
Matched: 24	Context:d7100 and 24-70 lens o
Matched: 70	Context:00 and 24-70 lens on t
Matched: 10	Context:te them a 10 out of 10
Matched: 10	Context:10 out of 10. Loved it
Matched: 12	Context:for about 12 years now
Matched: 3	Context:his is my 3rd time or
Matched: 1	Context:nately my 1st stethos
Matched: 3	Context:ght take  3-5 minutes
Matched: 5	Context:t take  3-5 minutes, 
Matched: 20	Context:m saving \$20 each mont
Matched: 7	Context: the card 7 days ago.
Matched: 12	Context:s.
Bought 12 Games Bun
Matched: 30	Context:h{\ldots}about 30 minutes t
Matched: 50	Context:tes to do 50.
Every ti
Matched: 1	Context:.and only 1/4 of the 
['400.00', '400.00', '8', '10', '8', '10', '2', '5', '10', '3', '6', '4', '2', '4', '2', '7100', '24', '70', '10', '10', '12', '3', '1', '3', '5', '20', '7', '12', '30', '50', '1', '4', '65', '2', '4', '7', '65', '49', '1', '10', '12', '2000', '5', '10', '5', '2018', '4', '7', '10', '3', '5', '3', '4', '4', '4', '6', '4', '11', '45', '12', '24', '94', '4', '3', '3', '300', '8,550', '4', '8', '8', '11', '5850510', '2269', '196.00', '204.00', '20', '2', '100', '2', '3', '9.00', '6', '15', '10', '25', '2000', '20', '4', '2', '24', '7', '100', '6', '400', '45', '2', '148', '296.00', '2', '48.84', '97.68', '15.00', '408.68', '10', '10', '79', '128.25', '50', '5', '5', '15', '2', '2', '1800', '4', '2', '19.99', '3', '4', '1', '2', '1', '1', '957', '2017', '8', '2', '12', '30', '2010', '60', '3', '2', '2', '2', '8', '2', '48', '3', '5', '10', '25', '10', '15', '6', '5', '99', '1', '2', '50', '25', '27', '2017', '2016', '1', '40', '0.97', '0.36', '2', '10', '2', '100', '18', '5', '3', '5', '10', '2', '10', '1', '30', '1', '4', '14', '2011', '2012', '5', '2005', '36', '11', '8', '4', '5', '6', '3', '1000', '4', '50', '3', '5', '11', '28', '16', '3', '40', '60', '1954', '2', '24', '9', '800', '81', '280', '2', '3', '5', '1', '6', '911', '84', '911', '85', '911', '5', '7224', '7224', '30', '7', '7', '10', '149', '5', '2', '0', '23', '1', '1', '1', '5', '2', '4721.20', '1253.16', '3468.04', '5', '5', '9', '10', '5', '24', '2', '90', '7', '5', '7', '5', '3', '20', '5', '6', '120', '22', '8', '40', '4', '4', '5', '8', '7', '7', '5.54', '8', '2.46', '7', '350', '300', '100', '45', '300', '45', '45', '2', '6', '0', '1', '42', '42', '25', '10', '3', '11', '30', '12', '12', '1', '4', '16', '2', '3', '212', '400', '3', '2009', '3', '20', '27', '1100', '18', '10', '4', '5', '7', '5', '1', '2', '1', '2', '2', '4', '24', '2', '15.00', '10', '10', '20', '8', '10', '6', '8', '10', '9', '30', '11', '30', '7.50', '4', '2', '3', '45', '2', '1', '2', '1', '2', '36', '2', '1063247410', '3', '50', '5', '9.99', '9.99', '9', '30', '5', '50,000', '5', '200', '2', '100', '11', '2', '3', '9.95', '9.95', '2', '300', '100', '300', '100', '400', '300', '10', '330.25', '6', '7', '5', '6', '400', '1000', '1000', '1000', '3', '44', '300', '48', '8600', '950', '4', '1', '2', '3', '1', '800', '3000', '39', '2', '3500', '2018', '14', '3', '2', '24', '29', '2', '231', '3', '4', '7', '5', '7', '5', '7', '7', '5', '3', '3', '7', '11', '3', '1', '3', '4', '20', '3', '2', '3', '8', '44', '10', '30', '4', '15', '10', '600', '15', '000', '2', '3', '200', '200', '3', '1000', '21', '3', '14', '30', '2016', '6', '1', '1', '12', '5', '3', '3', '3', '3', '1', '1', '7', '7', '270', '420', '150', '270', '370', '100', '10', '100', '10', '90', '5', '20', '100', '100', '2', '10', '5', '4.00', '1', '10', '6', '2037028', '000', '000', '2', '2', '2', '2', '2', '5', '2500', '4,500', '7', '00', '4', '3', '1', '908', '397', '8990', '10', '000', '3', '22', '2013', '3', '8', '9.98', '123', '5', '2', '2', '15', '20', '4', '20', '20', '8', '6', '6', '30', '100', '3', '3', '1999', '5', '90', '50', '2', '2', '3', '100', '2', '50', '13.90', '50', '4', '5', '5', '2', '5.00', '0', '5', '5', '2', '4', '2', '1800', '2', '30', '7', '5', '2003', '4', '2', '00', '91', '150', '10', '48', '3', '1', '30', '50', '5', '6', '29', '2017', '2', '3', '6', '5', '10', '2', '5', '3', '3', '2', '8', '2', '7', '30', '9', '00', '12', '8', '3', '14', '2', '1', '0', '16', '3', '1000', '400', '100.00', '5', '5', '4', '2', '2', '1', '0.83', '2', '5000.00', '2015', '3', '4', '5', '1', '150', '24', '486', '14', '15', '100', '5', '1', '2', '4', '110', '100', '20', '11', '5', '2', '1', '2', '15', '5', '19', '15', '14', '149', '5', '4', '150', '1', '3', '6', '6', '14', '4', '6', '10', '14', '14', '4', '4', '5', '6', '3', '1', '6', '2', '3', '3', '5', '5', '5', '9', '12', '3', '2', '3', '3', '3', '4', '10', '1', '100', '1993', '9', '40', '12', '4', '5', '4', '34', '3', '60', '2', '3', '6', '99.99', '17', '5', '1', '2000', '850', '1273', '2015', '2016', '62', '4', '15', '10', '10', '30', '2', '16', '18', '11', '1,150', '1', '2', '3', '2', '12', '3', '4', '4', '5', '100', '2', '1', '40', '4', '11', '2', '1', '2', '3', '6', '0', '50', '50', '8', '12', '14', '8', '17', '14', '5', '30', '50', '5', '5', '3', '11', '27', '30', '3', '8', '5', '7', '10', '1', '8', '10', '10', '48', '24', '20', '2', '5', '2', '40', '80', '18', '3', '6', '2', '230', '10', '40', '100', '2', '3', '30', '15', '2', '03', '2', '3', '24', '48', '1', '2', '5']

    \end{Verbatim}

    \begin{quote}
\textbf{Ex. 9.2.2:} Write an expression that matches both the
dollar-sign (\$) and dollar written literally, and the amount before or
after a dollar-sign. Remember that the "\$"-sign is a special character
in regular expressions. Explore and refine using the explore\_pattern
function in the package I created called explore\_regex.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ explore_regex }\ImportTok{as}\NormalTok{ e_re}
\NormalTok{explore_regex }\OperatorTok{=}\NormalTok{ e_re.Explore_Regex(sample_string) }\CommentTok{# Initaizlie the Explore regex Class.}
\NormalTok{explore_regex.explore_pattern(pattern) }\CommentTok{# Use the .explore_pattern method.}
\end{Highlighting}
\end{Shaded}

Start with exploring the context around digits ("\d") in the data.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}132}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 9.2.2]}
          \PY{n}{part1} \PY{o}{=} \PY{l+s+sa}{r}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{([\PYZdl{}]}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d+(?:}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{.}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d}\PY{l+s+si}{\PYZob{}2\PYZcb{}}\PY{l+s+s1}{)?(?:}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{d}\PY{l+s+si}{\PYZob{}3\PYZcb{}}\PY{l+s+s1}{)?)}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{part2} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+(?:[,.][0\PYZhy{}9]+)?}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{0,5\PYZcb{}dollar(?:oner)?}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n}{dollars} \PY{o}{=} \PY{p}{[}\PY{n}{part1}\PY{p}{,} \PY{n}{part2}\PY{p}{]}
          \PY{n}{generic\PYZus{}re} \PY{o}{=} \PY{n}{re}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{(}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s2}{|}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s2}{)}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{part1}\PY{p}{,} \PY{n}{part2}\PY{p}{)}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{explore\PYZus{}regex}\PY{p}{(}\PY{n}{generic\PYZus{}re}\PY{p}{,}\PY{n}{sample\PYZus{}string}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Matched: \$20	Context:am saving \$20 each mont
Matched: \$49	Context:nly costs \$49 bucks!
I 
Matched: \$2000	Context:ent nearly\$2000 in my fir
Matched: \$5	Context:I found a \$5 I had and
Matched: 10dollar	Context: belts at 10dollarmall for p
Matched: \$300	Context:dditional \$300 on top of
Matched: \$8,550	Context:op of the \$8,550 I already
Matched: \$196.00	Context:ensur for \$196.00 dollers n
Matched: \$204.00	Context: pump for \$204.00 dollers w
Matched: \$9.00	Context:e charged \$9.00 for the r
Matched: \$100	Context:I ordered \$100 plus in c
Matched: \$400	Context:ying over \$400 for two \$
Matched: \$45	Context:0 for two \$45 tickets! 
Matched: \$148	Context:kets:	2 x \$148 = \$296.00
Matched: \$296.00	Context: x \$148 = \$296.00
Service F
Matched: \$48.84	Context: Fee:	2 x \$48.84 = \$97.68

Matched: \$97.68	Context: \$48.84 = \$97.68
Delivery:
Matched: \$15.00	Context:livery:	 	\$15.00
Order Tot
Matched: \$408.68	Context:er Total:	\$408.68
I was ske
Matched: \$79	Context:sed to be \$79 USD and e
Matched: \$50	Context:heck out. \$50 rebate em
Matched: \$8	Context:pping was \$8!).  Sure 
Matched: \$15	Context:, but for \$15 I expect 
Matched: \$99	Context:wn to the \$99 service s
Matched: \$10	Context:ases over \$10. I recomm
Matched: \$50	Context:dditional \$50 on the or
Matched: \$800	Context:ve to put \$800 more down
Matched: \$10	Context:es wanted \$10. The only
Matched: \$4721.20	Context: to buy a \$4721.20 versus my
Matched: \$1253.16	Context:ticket of \$1253.16. Hey, tha
Matched: \$3468.04	Context: an extra \$3468.04!!!! Besid
['\$20', '\$49', '\$2000', '\$5', '10dollar', '\$300', '\$8,550', '\$196.00', '\$204.00', '\$9.00', '\$100', '\$400', '\$45', '\$148', '\$296.00', '\$48.84', '\$97.68', '\$15.00', '\$408.68', '\$79', '\$50', '\$8', '\$15', '\$99', '\$10', '\$50', '\$800', '\$10', '\$4721.20', '\$1253.16', '\$3468.04', '\$120', '\$5.54', '\$8', '\$2.46', '\$350', '\$300', '\$100', '\$300', '\$42', '\$42', '\$25', '\$18', '\$7.50', '\$50', '\$50,000', '\$200', '\$9.95', '\$9.95', '\$300', '\$300', '\$100', '\$400', '\$300', '\$330.25', '\$44', '3000 dollar', '\$3500', '\$600', '\$200', '\$200', '\$270', '\$420', '\$150', '\$270', '\$370', '\$100', '\$10', '\$100', '\$10', '\$90', '\$20', '\$100', '\$100', '\$10', '\$2500', '\$4,500', '\$9.98', '\$5', '\$90', '\$50', '\$7', '\$8', '\$12', '\$8', '\$400', '\$100.00', '\$150', '\$486', '\$149', '\$150', '\$12', '\$60', '\$99.99', '\$4', '\$1,150', '\$30', '\$10']

    \end{Verbatim}

    \begin{quote}
\textbf{Ex.9.2.3} Use the .report() method. e\_re.report(), and print
the all patterns in the development process using the .pattern method -
i.e. e\_re.patterns
\end{quote}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}133}]:} \PY{c+c1}{\PYZsh{} [Answer to Ex. 9.2.3] (only \PYZsq{}dollar\PYZsq{}, does not include \PYZsq{}\PYZdl{}\PYZsq{})}
          
          \PY{n}{explore\PYZus{}money} \PY{o}{=} \PY{n}{e\PYZus{}re}\PY{o}{.}\PY{n}{ExploreRegex}\PY{p}{(}\PY{n}{sample\PYZus{}string}\PY{p}{)}
          \PY{n}{first} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dollar}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{second} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+ ?dollar}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{third} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+(?:[,.][0\PYZhy{}9]+) ?dollar}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{fourth} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+(?:[,.][0\PYZhy{}9]+)?}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{0,2\PYZcb{} ?dollar}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{final} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[0\PYZhy{}9]+(?:[,.][0\PYZhy{}9]+)?}\PY{l+s+s1}{\PYZbs{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{0,5\PYZcb{}dollar(?:oner)?}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{patterns} \PY{o}{=} \PY{p}{[}\PY{n}{first}\PY{p}{,}\PY{n}{second}\PY{p}{,}\PY{n}{third}\PY{p}{,}\PY{n}{fourth}\PY{p}{,}\PY{n}{final}\PY{p}{]}
          
          \PY{k}{for} \PY{n}{pattern} \PY{o+ow}{in} \PY{n}{patterns}\PY{p}{:}
              \PY{n}{explore\PYZus{}money}\PY{o}{.}\PY{n}{explore\PYZus{}difference}\PY{p}{(}\PY{n}{pattern}\PY{p}{,}\PY{n}{patterns}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
          \PY{n}{explore\PYZus{}money}\PY{o}{.}\PY{n}{explore\PYZus{}pattern}\PY{p}{(}\PY{n}{final}\PY{p}{)}
          
          \PY{n}{explore\PYZus{}money}\PY{o}{.}\PY{n}{report}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{soft}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
------ Pattern: dollar	 Matched 10 patterns -----
Found 0 overlaps between the expressions:

        pattern1: dollar 	 and

        pattern2: dollar

        10 included in pattern1 and not in the pattern2

        10 was included in pattern2 and not in pattern1
------ Pattern: [0-9]+ ?dollar	 Matched 2 patterns -----
Found 4 overlaps between the expressions:

        pattern1: [0-9]+ ?dollar 	 and

        pattern2: dollar

        0 included in pattern1 and not in the pattern2

        8 was included in pattern2 and not in pattern1
------ Pattern: [0-9]+(?:[,.][0-9]+) ?dollar	 Matched 0 patterns -----
Found 0 overlaps between the expressions:

        pattern1: [0-9]+(?:[,.][0-9]+) ?dollar 	 and

        pattern2: dollar

        0 included in pattern1 and not in the pattern2

        10 was included in pattern2 and not in pattern1
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,2\} ?dollar	 Matched 2 patterns -----
Found 4 overlaps between the expressions:

        pattern1: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,2\} ?dollar 	 and

        pattern2: dollar

        0 included in pattern1 and not in the pattern2

        8 was included in pattern2 and not in pattern1
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,5\}dollar(?:oner)?	 Matched 2 patterns -----
Found 4 overlaps between the expressions:

        pattern1: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,5\}dollar(?:oner)? 	 and

        pattern2: dollar

        0 included in pattern1 and not in the pattern2

        8 was included in pattern2 and not in pattern1
Match: 3000 dollar	Context:rdering a 3000 dollar watch or 
Match: 10dollar	Context: belts at 10dollarmall for p
------ Pattern: dollar	 Matched 10 patterns -----
------ Pattern: [0-9]+ ?dollar	 Matched 2 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+) ?dollar	 Matched 0 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,2\} ?dollar	 Matched 2 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,5\}dollar(?:oner)?	 Matched 2 patterns -----

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_64_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}134}]:} \PY{n}{explore\PYZus{}money}\PY{o}{.}\PY{n}{report}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hard}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
------ Pattern: dollar	 Matched 10 patterns -----
------ Pattern: [0-9]+ ?dollar	 Matched 2 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+) ?dollar	 Matched 0 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,2\} ?dollar	 Matched 2 patterns -----
------ Pattern: [0-9]+(?:[,.][0-9]+)?\textbackslash{}s\{0,5\}dollar(?:oner)?	 Matched 2 patterns -----

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_65_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
